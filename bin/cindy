#!/usr/bin/env ruby

begin
  require 'rubygems'
  gem 'cindy'
rescue LoadError
end

require 'cindy'
require 'cindy/cli'

require 'readline'
require 'shellwords'

$VERBOSE = true

=begin
Readline.completion_proc = proc do |s|
    #
end
=end

cli = Cindy::CLI.new
if ARGV.any?
    cli.parse ARGV
else
    while line = Readline.readline('# ', true)
        begin
            cli.parse Shellwords.split(line)
        rescue Cindy::CLI::UnexpectedArgumentError => e
            puts "[ ERR ] #{e}"
        end
    end
end
